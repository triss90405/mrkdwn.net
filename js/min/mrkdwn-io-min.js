var editorWrapper=document.getElementById("editor"),previewWrapper=document.getElementById("preview"),init=function(){loadData(),editor(editorWrapper,previewWrapper),colorScheme(),indentOnTab(),toggleHtml(),toggleHelp()},loadData=function(){editorWrapper.innerHTML=localStorage.getItem("markdown")},editor=function(e,t){this.update=function(){t.innerHTML=markdown.toHTML(e.value),previewWrapper.classList.remove("html"),document.getElementById("show-html").classList.remove("active")},this.save=function(){localStorage.setItem("markdown",e.value)},this.characters=function(){var e=localStorage.getItem("markdown").length;document.getElementById("characterCount").innerHTML=e},e.editor=this,this.update(),this.save(),this.characters()},colorScheme=function(){var e=document.getElementById("dark-color-scheme"),t=document.getElementById("light-color-scheme"),n=localStorage.getItem("colorScheme"),r=document.body;r.classList.add(n),e.addEventListener("click",function(){r.classList.add("dark"),localStorage.setItem("colorScheme","dark")}),t.addEventListener("click",function(){r.classList.remove("dark"),localStorage.setItem("colorScheme","light")})},toggleHtml=function(){var e=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},t=document.getElementById("show-html"),n=previewWrapper.innerHTML;document.addEventListener("keyup",function(){n=previewWrapper.innerHTML}),t.addEventListener("click",function(){if(this.classList.toggle("active"),previewWrapper.classList.contains("html"))previewWrapper.classList.remove("html"),previewWrapper.innerHTML=n;else{var t=e(n);previewWrapper.classList.add("html"),previewWrapper.innerHTML='<code><pre style="background:transparent;white-space:pre-wrap;">'+t+"</pre></code>"}})},indentOnTab=function(){var e=document.getElementById("editor");tabIndent.render(e)},toggleHelp=function(){var e=document.getElementById("helpButton"),t=document.getElementById("helpContainer"),n=document.getElementById("helpClose");e.addEventListener("click",function(){t.classList.toggle("active")}),n.addEventListener("click",function(){t.classList.remove("active")}),document.addEventListener("keydown",function(e){var n=e.which;27===n&&t.classList.remove("active")})};init();var manualSave=function(){localStorage.setItem("markdown",editorWrapper.value),setTimeout(function(){window.location.reload()},100)};